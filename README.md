# Project Flashcast
Simultaneously upload and consume Azure block blob assets.

## Overview
By leveraging the technical details of how they are created and updated, it is possible to simultaneously upload and download block blobs. One of the ways to upload a block blob is block-by-block. Usually, the list of block names are retained in this case. Once the last block is named and transmitted, the aggregate block list is transmitted, thus committing the blob and making it readable by consumers.  

If instead the block list is committed after each block is transmitted, the blob is readable immediately.  

Imagine a media workload where a movie is uploaded to the cloud for transcoding. Using Flashcast, and blocking the media file a few minutes at a time for upload, the transcoding could be proceeding as the file is being uploaded. The transcoding would be completed as the last block is sent.  

## Operational overview
Azure Event Grid is configured to watch a container within your blob storage account. As create or delete events transpire, details about the event are written to an Azure storage queue. An application can use the information in the queue messages to read the blob.  

## Projects in this repo

### UploadBlobConsole
Windows console application that transmits a file to Azure blob storage, block by block, committing the block list after each block. Use a file that's big enough to take a few minutes at least to send. In the code, choose a block size that can be transmitted about 1 block every few seconds.  

### DownloadBlobConsole
Windows console application that reads the file back to the PC. This application consumes the Azure storage queue messages generated by the storage events and passed along by event grid. On each message, it reads the contents of the block list and copies any new block(s) to the PC.  

The download code is optimized in the way it consumes queue messages to account for the possibility that the upload code is faster.  
